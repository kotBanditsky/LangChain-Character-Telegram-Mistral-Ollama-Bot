## Random Character Chatbot with Langchain, Mistral, Ollama and Telegram

### Introduction:

This project is a chatbot application built using Node.js and Express, integrated with Telegram API for communication. The chatbot is capable of processing text input, providing responses based on predefined prompts, and handling URLs to extract information using various NLP techniques.

### Technologies Used:

- **Node.js**: For server-side JavaScript runtime environment.
- **Express**: Framework for building web applications with Node.js.
- **Cheerio**: For web scraping and parsing HTML content.
- **Ollama**: Get up and running with large language models, locally.
- **MistralAI**: Open and portable generative AI for devs and businesses.
- **TelegramBot**: Node.js library for interacting with the Telegram Bot API.
- **@langchain packages**: Various NLP-related packages for language processing tasks.

### Project Structure:

1. Importing necessary modules and dependencies:

   - Modules like `express`, `cheerio`, and `node-telegram-bot-api` are imported.
   - Configuration variables are imported from `config.js`.

2. Initializing components:

   - Express application is created.
   - Instances are created for `StringOutputParser` and `OllamaEmbeddings`.
   - Telegram Bot is set up with the provided token.
   - Chat prompt templates are defined based on user messages.

3. Defining main functionalities:

   - Various functions are implemented to handle different types of input:
     - `handleUrl`: It processes URL input, extracts content, and generates summaries.
     - `handleText`: It handles text inputs and processes them through the chatbot model.
     - `executeFunctionWithProbability`: Executes a function based on a given probability value.

4. Event handling:

   - The bot listens for incoming messages using the `bot.on('message', ...)` event.
   - Messages are processed based on conditions like URL presence, test messages, and text content.
   - Functions are executed according to the set probabilities for text processing.

5. Server initiation:
   - The Express server is set to listen on the specified port for incoming bot requests.

### Usage:

- Users can interact with the chatbot through a Telegram conversation.
- Send text or URL messages to receive responses generated by the language processing models.
- The bot processes messages, summarizes content, and sends responses back to the user.

### Features of the bot:

- Link processing only works when the bot is configured via Ollama; when you send a link, the bot will process it and summarize the data on the page
- If you write to the chat `BOT_TEST_MESSAGE`, you will immediately receive a message from `BOT_TEST_ANSWER` in response - this is a kind of test of the bot’s functionality
- The bot does not respond to all messages in the chat or group, but only to those where the chance of a response from 1 to 100 falls within the `ANSWER_CHANCE` value
- If you contact the bot using its `BOT_URL` link or BOT_NAME name, it will respond with 99% probability

### Getting Started:

1. Clone the project repository.
2. Install dependencies using `npm install`.
3. Update the configuration in `config.js` with your Telegram token and other necessary details.
4. Run the application using `npm start`.
5. Interact with the chatbot via Telegram to test its functionalities.

**Note:** You can create a chat with a unique character by describing it in detail in the `config.js` file in the `PROMPT_CHAT` variable - the more detailed you describe the assistant’s personality, the more similar the answers will be to him. Feel free to write A LOT.

This project demonstrates the integration of various NLP components to create a functional chatbot capable of processing text and extracting information from the web.
